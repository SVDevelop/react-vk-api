{"ast":null,"code":"import _regeneratorRuntime from \"/home/serg/Documents/react/react-vk-api/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/serg/Documents/react/react-vk-api/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/serg/Documents/react/react-vk-api/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/serg/Documents/react/react-vk-api/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/serg/Documents/react/react-vk-api/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useState } from \"react\";\nimport Input from \"./components/Input\";\nimport NewsPosts from \"./pages/NewsPosts\";\nimport SearchGroups from \"./components/SearchGroups\";\nimport useQuery from \"./hooks/useQuery\";\nimport Main from \"./pages/Main\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport \"./styles.css\";\nimport { useVK } from \"./VK\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n\n  var _this = this;\n\n  var _useVK = useVK(),\n      login = _useVK.login,\n      user = _useVK.user,\n      authenticated = _useVK.authenticated,\n      call = _useVK.call;\n\n  var _useState = useState({\n    groups: {\n      count: 0,\n      chunk: []\n    }\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      groupsState = _useState2[0],\n      setGroupsState = _useState2[1];\n\n  var _useState3 = useState({\n    groups: {\n      count: 0,\n      chunk: []\n    }\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      wallState = _useState4[0],\n      setWallState = _useState4[1]; // const [wallVisible, setWallVisible] = useState(false);\n  // const showWall = () => setWallVisible(!wallVisible);\n\n\n  var goupSearch = useCallback( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n      var _yield$call, response, count, items;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return call(\"groups.search\", {\n                q: value,\n                sort: 0\n              });\n\n            case 2:\n              _yield$call = _context.sent;\n              response = _yield$call.response;\n              count = response.count, items = response.items; // console.log('goupSearch', count, items);\n\n              setGroupsState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  groups: _objectSpread(_objectSpread({}, groupsState.groups), {}, {\n                    count: count,\n                    chunk: items\n                  })\n                });\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [call]);\n  var wallGet = useCallback( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var _yield$call2, response, count, items;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return call(\"wall.get\", {\n                owner_id: \"-\".concat(id)\n              });\n\n            case 2:\n              _yield$call2 = _context2.sent;\n              response = _yield$call2.response;\n              count = response.count, items = response.items;\n              count && setWallState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  groups: _objectSpread(_objectSpread({}, groupsState.groups), {}, {\n                    count: count,\n                    chunk: items\n                  })\n                });\n              });\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [call]); // const groupsGetById = useCallback(\n  //   async (group_id) => {\n  //     const { response } = await call(\"groups.getById\", { group_id });\n  //     const { count, items } = response;\n  //     console.log(items);\n  //     // setState((state) => ({\n  //     //   ...state,\n  //     //   groups: {\n  //     //     ...state.groups,\n  //     //     count,\n  //     //     chunk: items\n  //     //   }\n  //     // }));\n  //   },\n  //   [call]\n  // );\n\n  if (!authenticated) {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: login,\n      children: \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(UserLink, {\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Router, {\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          render: function render() {\n            return /*#__PURE__*/_jsxDEV(Main, {\n              onEnter: goupSearch,\n              state: groupsState,\n              wallGet: wallGet\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 45\n            }, _this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/newsposts\",\n          render: function render() {\n            return /*#__PURE__*/_jsxDEV(NewsPosts, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 39\n            }, _this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 1\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(App, \"KVjOzmviJh+n99uGxRdKAMnLOQ4=\", false, function () {\n  return [useVK];\n});\n\n_c = App;\n\nfunction UserLink(props) {\n  var user = props.user;\n  return /*#__PURE__*/_jsxDEV(\"a\", {\n    href: user.href,\n    target: \"_blank\",\n    rel: \"noreferrer\",\n    children: [user.first_name, \" \", user.last_name]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = UserLink;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"UserLink\");","map":{"version":3,"sources":["/home/serg/Documents/react/react-vk-api/src/App.js"],"names":["useCallback","useState","Input","NewsPosts","SearchGroups","useQuery","Main","BrowserRouter","Router","Switch","Route","Link","useVK","App","login","user","authenticated","call","groups","count","chunk","groupsState","setGroupsState","wallState","setWallState","goupSearch","value","q","sort","response","items","prevState","wallGet","id","owner_id","UserLink","props","href","first_name","last_name"],"mappings":"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","sourcesContent":["import { useCallback, useState } from \"react\";\nimport Input from \"./components/Input\";\nimport NewsPosts from \"./pages/NewsPosts\";\nimport SearchGroups from \"./components/SearchGroups\";\nimport useQuery from \"./hooks/useQuery\";\nimport Main from \"./pages/Main\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nimport \"./styles.css\";\nimport { useVK } from \"./VK\";\n\nexport default function App() {\n  const { login, user, authenticated, call } = useVK();\n\n  const [groupsState, setGroupsState] = useState({\n    groups: {\n      count: 0,\n      chunk: []\n    }\n  });\n  const [wallState, setWallState] = useState({\n    groups: {\n      count: 0,\n      chunk: []\n    }\n  });\n  // const [wallVisible, setWallVisible] = useState(false);\n\n  // const showWall = () => setWallVisible(!wallVisible);\n\n  const goupSearch = useCallback(\n    async (value) => {\n      const { response } = await call(\"groups.search\", { q: value, sort: 0 });\n      const { count, items } = response;\n      // console.log('goupSearch', count, items);\n\n      setGroupsState((prevState) => ({\n        ...prevState,\n        groups: {\n          ...groupsState.groups,\n          count,\n          chunk: items\n        }\n      }));\n    },\n    [call]\n  );\n  const wallGet = useCallback(\n    async (id) => {\n      const { response } = await call(\"wall.get\", { owner_id: `-${id}` });\n      const { count, items } = response;\n\n      count &&\n        setWallState((prevState) => ({\n          ...prevState,\n          groups: {\n            ...groupsState.groups,\n            count,\n            chunk: items\n          }\n        }));\n    },\n    [call]\n  );\n\n  // const groupsGetById = useCallback(\n  //   async (group_id) => {\n  //     const { response } = await call(\"groups.getById\", { group_id });\n  //     const { count, items } = response;\n  //     console.log(items);\n\n  //     // setState((state) => ({\n  //     //   ...state,\n  //     //   groups: {\n  //     //     ...state.groups,\n  //     //     count,\n  //     //     chunk: items\n  //     //   }\n  //     // }));\n  //   },\n  //   [call]\n  // );\n\n  if (!authenticated) {\n    return <button onClick={login}>Авторизоваться</button>;\n  }\n\n\n  return (\n    <>\n      <UserLink user={user} />\n      <br />\n\n      {/* {wallState.groups.count && \"fired\"} */}\n      <Router>\n        <Switch>\n        <Route exact path=\"/\" render={() => <Main\n        onEnter={goupSearch}\n  state={groupsState}\n  wallGet={wallGet} /> } />\n<Route path=\"/newsposts\" render={()=> <NewsPosts /> } />\n        </Switch>\n      </Router>\n    </>\n  );\n}\n\nfunction UserLink(props) {\n  const { user } = props;\n\n  return (\n    <a href={user.href} target=\"_blank\" rel=\"noreferrer\">\n      {user.first_name} {user.last_name}\n    </a>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}